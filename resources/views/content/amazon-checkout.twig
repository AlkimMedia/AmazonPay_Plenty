{% extends getPartial('page-design') %}
{% block PageBody %}
    <div class="container-max">
        <h1>{{ trans("AmazonLoginAndPay::AmazonPay.checkoutPageCaption") }}</h1>
        {% if (error != '') or (walletOnly == 1) %}
            <div class="alert alert-danger">
                {% if (error == 'InvalidPaymentMethod') or (error == 'TransactionTimeout') or (walletOnly == 1) %}
                    {{ trans("AmazonLoginAndPay::AmazonPay.pleaseChangePaymentMethod") }}
                {% else %}
                    {{ error }}
                {% endif %}
            </div>
        {% endif %}
        {% if walletOnly != 1 %}
            <div class="amz-checkout-box">
                <h2>{{ trans("AmazonLoginAndPay::AmazonPay.shippingAddressCaption") }}</h2>
                <div id="addressBookWidgetDiv"></div>
            </div>
        {% endif %}
        <div class="amz-checkout-box">
            <h2>{{ trans("AmazonLoginAndPay::AmazonPay.paymentMethodCaption") }}</h2>
            <div id="walletWidgetDiv"></div>
        </div>
        {% if walletOnly != 1 %}
            <div class="amz-checkout-box">
                <h2>{{ trans("AmazonLoginAndPay::AmazonPay.shippingMethodCaption") }}</h2>
                <div id="shippingOptionsListWr" class="amz-border-box">
                    <div class="amz-loading"></div>
                </div>
            </div>

            <div class="amz-checkout-box">
                <h2>{{ trans("AmazonLoginAndPay::AmazonPay.summaryCaption") }}</h2>
                <div class="amz-border-box">
                    <div id="orderDetailsWr">
                        <div class="amz-loading"></div>
                    </div>
                    <div class="amz-checkout-order-button-wr">
                        <a href="amazon-checkout-proceed"
                           class="btn btn-primary">{{ trans("AmazonLoginAndPay::AmazonPay.orderButtonCaption") }}</a>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="amz-checkout-order-button-wr wallet-only">
                <a href="amazon-checkout-proceed"
                   class="btn btn-primary">{{ trans("AmazonLoginAndPay::AmazonPay.orderButtonCaption") }}</a>
            </div>
        {% endif %}
        <script type="text/javascript">
            var amazonLoginAndPay = {
                config: {
                    payButtonSize: '{{ config('AmazonLoginAndPay.payButtonSize') }}',
                    payButtonColor: '{{ config('AmazonLoginAndPay.payButtonColor') }}',
                    loginButtonSize: '{{ config('AmazonLoginAndPay.loginButtonSize') }}',
                    loginButtonColor: '{{ config('AmazonLoginAndPay.loginButtonColor') }}',
                    popup: true,
                    clientId: '{{ config('AmazonLoginAndPay.loginClientId') }}',
                    merchantId: '{{ config('AmazonLoginAndPay.merchantId') }}'
                },
                widgets: {}
            }
        </script>
        <script src="//code.jquery.com/jquery-2.2.4.min.js"></script>
        <script src="//www.alkim.de/AmazonPaymentsShops/plentymarkets/js/amz-main.js"></script>
        <link href="//www.alkim.de/AmazonPaymentsShops/plentymarkets/js/amz-main.css" rel="stylesheet"/>

        {% if config('AmazonLoginAndPay.sandbox') == "true" %}
            <script async="async"
                    src='https://static-eu.payments-amazon.com/OffAmazonPayments/eur/sandbox/lpa/js/Widgets.js'></script>
        {% else %}
            <script async="async"
                    src='https://static-eu.payments-amazon.com/OffAmazonPayments/eur/lpa/js/Widgets.js'></script>
        {% endif %}

    </div>
{% endblock %}