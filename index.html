<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        h2 {
            margin-top: 40px;
            font-size: 1.5em;
            border-bottom: 1px solid #aaa;
            padding-bottom: 5px;
            margin-bottom: 10px;
            font-weight: bold;
        }

        h3 {
            margin-top: 20px;
            font-size: 1.3em;
            font-weight: bold;
        }

        h4 {
            margin-top: 10px;
            font-size: 1.3em;
        }

        img {
            display: block;
            max-width: 100%;
            margin: 20px 0;

        }

        body {
            padding: 10px;
            font-size: 13px;
        }
    </style>
    <title>Amazon Pay für plentymarkets</title>
</head>
<body>
<h1>Amazon Pay für plentymarkets</h1>
<h2 id="anchor_1">
    1. Überblick Zahlungsablauf
</h2>
<div>
    Für die Einrichtung des Amazon Pay Plugins für plentymarkets ist es wichtig, zu verstehen, dass sich der
    Zahlungsablauf in einem Detail etwas anders verhält als bei herkömmlichen Zahlungsanbietern.
    Statt eines direkten Zahlungseinzugs findet vorerst eine Autorisierung statt, die für dich als Händler eine
    Zahlungsgarantie bedeutet. Der eigentliche Zahlungseinzug ist ein eigener Schritt, der normalerweise bei Versand
    der Ware ausgelöst werden sollte.<br/>
    Umfangreiche Informationen findest du auf der <a href="https://pay.amazon.com/de/merchant" target="_blank">Website
    von Amazon Pay</a>.
    <br/>
    Das Plugin selbst bietet in deinem Shop eine eigene Checkout-Seite an, auf der der Kunde aus seinen bei Amazon
    hinterlegten Zahlungsarten und Versandadressen wählen kann.
</div>
<h2 id="anchor_2">
    2. Plugin-Setup
</h2>
<h3>2.1 Plugin-Installation</h3>
<div>
    Du erhältst das Amazon Pay Plugin für plentymarkets am einfachsten direkt im <a
        href="https://marketplace.plentymarkets.com/plugins/payment/AmazonLoginAndPay_5072" target="_blank">plentyMarketplace</a>.
    Weitere Informationen zur Installation von Marketplace Plugins gibt es auch in den <a
        href="https://marketplace.plentymarkets.com/faq" target="_blank">FAQs</a>.<br/>
    Für versierte Anwender steht natürlich auch die Einbindung über unser <a
        href="https://github.com/AlkimMedia/AmazonPay_Plenty" target="_blank">GitHub Repository</a> zur Verfügung.
    <br/><br/>
    Bitte denke wie bei allen Plugins daran, dass du es im richtigen Set für den jeweiligen Mandaten aktivierst und
    bereitstellst.
</div>
<h3>2.2 Amazon Pay Account anlegen</h3>
<div>
    Wenn du noch keinen Amazon-Pay Account hast, kannst du dich <a
        href="https://payments-eu.amazon.com/register?spId=A1SGXK19QKIYNB&marketplaceId=A53RDEWN57UU5&language=de_DE&locale=de_DE&source=SPPD&ref=sp_de_ap_np_sp_AkPm_xx_xx_xx_Man"
        target="_blank">hier registrieren</a>.
</div>
<h3>2.3 Einrichtung in Sellercentral und Zugangsdaten</h3>
<h4>2.3.1 "Login mit Amazon"-Einstellungen</h4>
<div>
    Auf der Einstellungsseite für den Login mit Amazon musst du eine neue Anwendung registrieren. Fülle dann die
    vorhandenen Felder entsprechend deinen Anforderungen aus.
    Zwei Angaben sind für die Integration mit plentymarkets obligatorisch, nämlich "Zulässige JavaScript-Ursprünge" und
    "Zulässige Rückleitungs-URLs". Diese sind entsprechend des folgenden Screenshots auszufüllen. Ersetze dafür
    www.domain.com mit deiner Shop-Domain:
    <div>
        <b>Zulässige JavaScript-Ursprünge:</b> https://www.domain.com/
    </div>
    <div>
        <b>Zulässige Rückleitungs-URLs:</b> https://www.domain.com/amazon-login-processing/
    </div>
    <img src="images/client_setup.jpg"/>
    <div>
        Weitere Hilfe dazu erhalten Sie in <a
            href="https://images-na.ssl-images-amazon.com/images/G/03/amazonservices/payments/website/AmazonPay_ClientID_DE._V532164949_.pdf"
            target="_blank">diesem Dokument von Amazon</a>.
    </div>
</div>
<h4>2.3.2 MWS Zugangsdaten</h4>
<div>
    Erzeuge unter <i>Integration</i> » <i>MWS Access Key</i> deine MWS Zugangsdaten.
</div>
<h4>2.3.3 IPN (Sofortbenachrichtigung)</h4>
<div>
    Die Einrichtung der IPN (Instant Payment Notification = Sofortbenachrichtigung) ermöglicht es, dass dein
    plentymarkets-System in Echtzeit über Statusänderungen einer Zahlung informiert wird.
    Wähle dazu den Menüpunkt <i>Einstellungen</i> » <i>Integrationseinstellungen</i> und hinterlege bei "Händler-URL"
    https://www.domain.com/amazon-ipn/ (www.domain.com bitte durch deine Shop-Domain ersetzen)
    <img src="images/ipn.jpg"/>
</div>
<h4>2.3.4 Zugangsdaten im plentymarkets-Plugin hinterlegen</h4>
<div>
    Nachdem zu alles konfiguriert hast, findest du deine Zugangsdaten unter <i>Integration</i> » <i>MWS Access Key</i>.
    <img src="images/credentials.jpg"/>
    Diese sind entsprechend in die Plugin-Konfiguration zu kopieren. Bitte achte dabei darauf, dass du nicht
    versehentlich Leerzeichen am Anfang oder Ende mit kopierst.
    <img src="images/credentials_plugin.jpg" style="max-width:400px;"/>
</div>
<h3>2.4 Weitere Plugin-Konfiguration</h3>
<div>
    Die weiteren Konfigurationsmöglichkeiten im plentymarkets-Plugin ermöglichen dir, das Verhalten des Plugins an
    deine Prozesse anzupassen.

</div>
<h4>2.4.1 Grundeinstellungen</h4>
<dl>
    <dt>
        Status
    </dt>
    <dd>
        Erlaubt es, das Plugin vorübergehend zu deaktivieren
    </dd>
    <dt>
        Sandbox
    </dt>
    <dd>
        Schaltet das Plugin in den Sandbox-Modus. Dabei werden keine echten Zahlungen ausgelöst. Bitte beachte, dass es
        für den Sandbox-Modus in Sellercentral eigene Konfigurationsmöglichkeiten gibt und du zum Testen keine echten
        Amazon-Accounts verwenden kannst, sondern dir einen eigenen Testaccount in Sellercentral anlegen musst.
    </dd>
    <dt>
        Buttons verstecken (debug)
    </dt>
    <dd>
        Versteckt die Buttons im Frontend mit CSS (display:none), sodass du im Frontend testen kannst, ohne dass deine
        Kunden beeinträchtigt werden.
    </dd>
    <dt>
        Wenn möglich Amazon-Login im Popup
    </dt>
    <dd>
        Das Amazon-Login-Formular kann entweder in einem Popup präsentiert werden oder per Weiterleitung mit
        anschließender Rückleitung in deinen Shop.
    </dd>
    <dt>
        Art der Autorisierung
    </dt>
    <dd>
        Hiermit kannst du einstellen, wann die Autorisierung der Zahlung durchgeführt werden soll. Wenn du keine
        besonderen Anforderungen hast, solltest du es hier bei der Standard-Einstellung belassen. (siehe hierzu auch <a
            href="#anchor_1">1.</a> und <a href="#anchor_3">3.1</a>)<br />
        Bei Auswahl der Standard-Einstellung versucht das Plugin, die Zahlung bereits während des Checkouts zu autorisieren, um den Kunden im Fall einer eindeutigen Ablehnung zur Auswahl einer anderen Zahlungsart zu bewegen.
        In Ausnahmefällen kann es sein, dass die Autorisierungsanfrage nicht eindeutig beantwortet werden kann. Dann wird die Bestellung trotzdem abgeschlossen und das Autorisierungsergebnis nachgereicht.

    </dd>
    <dt>
        Art des Zahlungseinzugs
    </dt>
    <dd>
        Hiermit kannst du einstellen, wann der Zahlungseinzug durchgeführt werden soll. In den allermeisten Fällen ist
        der Einzug per Ereignisaktion zum Zeitpunkt des Versands die beste Möglichkeit (siehe <a
            href="#anchor_3">3.2</a>).<br/>
        Bei Download-Produkten empfiehlt sich der Einzug direkt nach Autorisierung.
    </dd>
    <dt>Auftragsstatus nach erfolgreicher Autorisierung</dt>
    <dd>Hier kannst du eine Status-ID hinterlegen (z.B. 5.0). Diese wird nach erfolgreicher Autorisierung gesetzt, um zu
        signalisieren, dass die Ware versendet werden kann.
    </dd>
    <dt>
        Auftragsstatus bei Ablehnung des Zahlungsmittels, Kundenaktion notwendig (vorläufig abgelehnte Zahlungen)
    </dt>
    <dd>
        Hier kannst du eine Status-ID hinterlegen (z.B. 3.x). Diese wird nach Ablehnung des Zahlungsmittels gesetzt, um
        zu signalisieren, dass eine Aktion zur Problemlösung notwendig ist. Der Kunde kann z.B. durch Auswahl eines
        anderen Zahlungsmittels bei Amazon den Auftrag noch nachträglich bezahlen. (siehe hierzu auch <a
                href="#anchor_4">4.</a>)
    </dd>
    <dt>
        Auftragsstatus bei vollständiger Ablehnung der Zahlung mit Amazon Pay (endgültig abgelehnte Zahlungen)
    </dt>
    <dd>
        Hier kannst du eine Status-ID hinterlegen (z.B. 3.x). Diese wird bei vollständiger Ablehnung der Zahlung gesetzt. In diesem Fall solltest du Kontakt mit dem Kunden aufnehmen, um einen alternativen Zahlungsweg z.B. per Überweisung anzubieten. (siehe hierzu auch <a href="#anchor_4">4.</a>)
    </dd>
    <dt>
        Amazon Pay Vorgang bei komplettem Zahlungseinzug abschließen
    </dt>
    <dd>
        Wenn diese Einstellung aktiviert ist, wird der Zahlungsvorgang nach Zahlungseinzug geschlossen. Nach dem Schließen sind keine weiteren Abbuchungen mehr möglich.
    </dd>
    <dt>
        Plenty-Auftragsnummer an Amazon übertragen
    </dt>
    <dd>
        Wenn diese Einstellung aktiviert ist, wird die Auftragsnummer von plentymarkets an Amazon übergeben. Diese dient als Referenz für dich und den Kunden, um die Zahlung bei Amazon leicht zuordnen zu können.
    </dd>

</dl>
<h4>2.4.2 Style</h4>

<div>
    Hier kannst du Einstellungen zum Aussehen der Amazon-Buttons treffen.
</div>
<h2 id="anchor_3">3. Ereignisaktionen</h2>
<h3>3.1 Amazon Pay Zahlung autorisieren</h3>
<div>Diese Ereignisaktionen wird für den normalen Workflow nicht gebraucht und ist nur dann relevant, wenn
    ungewöhnliche
    Prozesse eine Autorisierung zu einem bestimmten Zeitpunkt erfordern, z.B. bei langfristigen
    Vorbestellungen.<br/>
    Unter normalen Umständen sollte in der Plugin-Konfiguration die Autorisierung "während des Checkouts" gewählt
    werden.
</div>
<h3>3.2 Vollständiger Einzug der Amazon Pay Zahlung</h3>
<div>Diese Ereignisaktion muss unbedingt eingerichtet werden, damit die Zahlung auch tatsächlich eingezogen wird.
    Sinnvoll ist eine Kopplung an den Versand, also z.B. an den Statuswechsel auf "[7] Warenausgang gebucht".
</div>
<h3>3.3 Amazon Pay Vorgang schließen</h3>
<div>Wenn du in der Plugin-Konfiguration nicht "Amazon Pay Vorgang bei komplettem Zahlungseinzug abschließen"
    gewählt hast, solltest du diese Ereignisaktion einrichten, um dem Kunden zu signalisieren, dass du alle
    Zahlungsvorgänge
    ausgeführt hast und er keine weiteren Zahlungseinzüge zu erwarten hat.
</div>
<h3>3.4 Erstattung der Amazon Pay Zahlung</h3>
<div>Um dem Kunden seine Zahlung im Fall einer Gutschrift zu erstatten, z.B. bei einer Retoure, solltest du diese
    Ereignisaktion z.B. bei dem Ereignis "Neue Gutschrift" einrichten. Die Aktion veranlasst eine Rückzahlung in
    Höhe der Gutschrift, die du angelegt hast.
</div>
<h2 id="anchor_4">4. E-Mails</h2>
<div>
    Da es passieren kann, dass Zahlungen des Kunden nach dem Abschluss des Checkout-Vorgangs abgelehnt werden, solltest
    du den Kunden darüber informieren. Dazu kannst du eine "E-Mail versenden"-Ereignisaktion an den Auftragsstatus
    koppeln, den du in der Plugin-Konfiguration unter "Auftragsstatus bei Ablehnung des Zahlungsmittels, Kundenaktion
    notwendig (vorläufig abgelehnte Zahlungen)" bzw. "Auftragsstatus bei vollständiger Ablehnung der Zahlung mit Amazon
    Pay (endgültig abgelehnte Zahlungen)" gesetzt hast.
</div>
<div>
    Du findest dafür hier zwei Vorlagen:<br/>
    <a href="https://www.alkim.de/download/content/AmazonPayPlenty/amazon_soft_decline.pdf" target="_blank">Vorläufige
        Ablehnung</a><br/>
    <a href="https://www.alkim.de/download/content/AmazonPayPlenty/amazon_hard_decline.pdf" target="_blank">Endgültige
        Ablehnung</a>
</div>

<h2 id="anchor_5">5. Content Container</h2>
Damit das Plugin im Frontend deines Shops erscheint, musst du in deinem plentymarkets Backend unter <i>CMS</i> » <i>Container-Verknüpfungen</i>
folgende Zuordnungen vornehmen:

<div>
    <b>Amazon Login & Pay - Checkout-Button</b><br/>
    ✓ Shopping cart: After "Checkout" button<br/>
    ✓ Shopping cart overlay: Extend buttons<br/>
    ✓ Shopping cart preview: After "Checkout" button<br/>
    ✓ Checkout: After payment method
</div>
<div>
    <b>Amazon Login & Pay - Checkout-Button auf Artikelseite (Schnellkauf)</b><br/>
    ✓ Single item: After "Add to shopping cart" button
</div>
<div>
    <b>Amazon Login & Pay - Login-Button</b><br/>
    ✓ Login: Container below the buttons<br/>
    ✓ Login overlay: Container in a row with the buttons<br/>
    ✓ Registration overlay: Container in a row with the buttons
</div>
<div>
    <b>Amazon Login & Pay - Zahlungshinweis auf Bestätigungsseite</b><br/>
    ✓ Order confirmation: Additional payment information
</div>
<div>
    <b>Amazon Login & Pay - JavaScript</b><br/>
    ✓ Script loader: Register/load JS
</div>
<div>
    <b>Amazon Login & Pay - Logo </b><br/>
    Dieser Container zeigt das Amazon-Pay Logo. Du kannst ihn nutzen, um das Logo in deinem Shop anzuzeigen.
</div>
<h2 id="anchor_6">6. Loslegen</h2>
<div>
    Damit sollte alles erledigt sein, um deinen Kunden ein reibungsloses Amazon Pay Einkaufserlebnis zu bieten. <br/>
    Wenn du Fragen, Probleme oder Anregungen hast, kontaktiere uns am besten im plentymarkets Forum in <a
        href="https://forum.plentymarkets.com/c/non-plenty-plugins/amazon-pay" target="_blank">dieser Kategorie</a>.
</div>


<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</body>
</html>